# INAV 9.0.0-RC3 Release Plan

**Date:** 2025-12-06/07
**Release Manager:** Claude
**Type:** Pre-release (Release Candidate)

## Target Commits

### Firmware
- **Repository:** iNavFlight/inav
- **Branch:** maintenance-9.x
- **Commit:** `edf50292e77620e2af428f04606313859c016978`
- **Short SHA:** `edf50292`
- **Date:** 2025-12-06 22:50:57 UTC

### Configurator
- **Repository:** iNavFlight/inav-configurator
- **Branch:** maintenance-9.x
- **Commit:** `c2886074195671f3859cf09d40c7fdeec43143ce`
- **Short SHA:** `c2886074`
- **Date:** 2025-12-07 (includes SITL update from PR #2464)

## Changes Since RC2

### Firmware (4 PRs)

1. **PR #11146** - MSP2_INAV_SET_GVAR by @xznhj8129
   - Adds MSP2_INAV_SET_GVAR command to allow setting Global Variables through MSP protocol

2. **PR #11152** - Add release creation guide by @sensei-hacker
   - Comprehensive documentation for creating INAV releases

3. **PR #11159** - Update LedStrip.md by @Barnabasek
   - Updates Oscar Liang's guide URL from blog.oscarliang.net to oscarliang.com

4. **PR #11157** - Fix missing magnetometer support on NEXUSX target by @sensei-hacker
   - Fixes magnetometer configuration for NEXUSX flight controller

### Configurator (10 PRs)

Primary focus: JavaScript Programming tab fixes and enhancements

1. **PR #2461** - Add flight axis override support to JavaScript Programming
2. **PRs #2460, #2456, #2455, #2452, #2451, #2450, #2445** - JavaScript Programming and transpiler bug fixes
3. **PR #2446** - Update fetch to ESM import syntax
4. **PR #2447** - magnetometer.js error logging

## Artifact Status

### âœ… Configurator - READY (WITH SITL UPDATE)
- **Location:** `claude/release-manager/downloads/configurator-9.0.0-RC3/`
- **CI Run:** #20000162108 (commit 9bcf765e)
- **SITL Status:** âœ… INCLUDES updated SITL binaries from PR #2464
- **Files:** 14 total (6 Linux, 4 macOS, 4 Windows)
- **Organized by platform:** linux/, macos/, windows/
- **DMG Verification:** âœ… PASSED (no Windows contamination)
- **Verification Report:** `VERIFICATION-REPORT.md`

### ðŸ”„ Firmware - IN PROGRESS
- **Source:** inav-nightly v9.0.0-20251207.178
- **Status:** Downloading ~219 hex files
- **Needs:** Rename files (remove `_ci-20251207-68546a2` suffix, add `_RC3`)

## Release Notes Prepared

### Firmware
- **File:** `claude/release-manager/9.0.0-RC3-firmware-release-notes.md`
- **Format:** Cumulative (RC3 changes + all RC2 content)
- **Status:** âœ… Ready

### Configurator
- **File:** `claude/release-manager/9.0.0-RC3-configurator-release-notes.md`
- **Format:** Cumulative (RC3 changes + all RC1 content)
- **Status:** âœ… Ready

### Wiki
- **File:** `inavwiki/9.0.0-Release-Notes.md`
- **Updates:** Added RC3 changes section
- **Status:** âœ… Updated

## Execution Commands

### 1. Create GitHub Releases (creates tags automatically)

#### Firmware
```bash
gh release create 9.0.0-RC3 \
  --repo iNavFlight/inav \
  --target edf50292e77620e2af428f04606313859c016978 \
  --title "INAV 9.0.0-RC3 release candidate for testing" \
  --notes-file claude/release-manager/9.0.0-RC3-firmware-release-notes.md \
  --prerelease \
  --draft
```

#### Configurator
```bash
gh release create 9.0.0-RC3 \
  --repo iNavFlight/inav-configurator \
  --target c2886074195671f3859cf09d40c7fdeec43143ce \
  --title "INAV Configurator 9.0.0-RC3 release candidate for testing" \
  --notes-file claude/release-manager/9.0.0-RC3-configurator-release-notes.md \
  --prerelease \
  --draft
```

### 2. Rename Firmware Files

```bash
cd claude/release-manager/downloads/firmware-9.0.0-RC3

# Rename all hex files
for f in *.hex; do
  # Extract target name (between version and _ci-)
  target=$(echo "$f" | sed -E 's/inav_[0-9]+\.[0-9]+\.[0-9]+_(.*)_ci-.*/\1/')
  newname="inav_9.0.0_RC3_${target}.hex"
  mv "$f" "$newname"
done

# Verify
ls *.hex | head -5
```

### 3. Upload Artifacts

#### Configurator (ready now)
```bash
cd claude/release-manager/downloads/configurator-9.0.0-RC3

gh release upload 9.0.0-RC3 linux/* --repo iNavFlight/inav-configurator
gh release upload 9.0.0-RC3 macos/* --repo iNavFlight/inav-configurator
gh release upload 9.0.0-RC3 windows/* --repo iNavFlight/inav-configurator
```

#### Firmware (after renaming)
```bash
cd ../firmware-9.0.0-RC3

# Upload all hex files
gh release upload 9.0.0-RC3 *.hex --repo iNavFlight/inav
```

### 4. Publish Releases

After reviewing draft releases:

```bash
# Publish firmware
gh release edit 9.0.0-RC3 --repo iNavFlight/inav --draft=false

# Publish configurator
gh release edit 9.0.0-RC3 --repo iNavFlight/inav-configurator --draft=false
```

## Verification Checklist

- [x] Release notes include all changes since RC2
- [x] Wiki updated with RC3 changes
- [x] Configurator artifacts downloaded and organized by platform
- [x] macOS DMGs verified (no Windows contamination)
- [ ] Firmware hex files downloaded
- [ ] Firmware hex files renamed
- [ ] Draft releases created
- [ ] Artifacts uploaded
- [ ] Releases reviewed and published

## Documentation Updates

All documentation has been updated with lessons learned:

1. **RC Release Pattern** - Documented cumulative approach
2. **DMG Verification** - Created reusable verification script
3. **gh release create** - Documented tag-free release creation
4. **Artifact Download Timing** - Explained commit-based downloads

## Success Criteria

- âœ… Both releases tagged at correct commits
- âœ… All artifacts uploaded correctly
- âœ… No cross-platform contamination
- âœ… Release notes are cumulative and accurate
- âœ… Pre-release flag set correctly

## Next Steps

1. Wait for firmware hex file download to complete
2. Rename firmware hex files
3. Create draft releases using `gh release create`
4. Upload all artifacts
5. Review draft releases
6. Publish when ready
