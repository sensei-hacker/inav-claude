# 9.0.0-RC3 Incompatible Settings Review

**Date:** 2025-12-07
**For Release:** 9.0.0-RC3
**Compared Against:** 8.0.1

## Summary

Identified **6 incompatible settings changes** between 8.0.1 and 9.0.0-RC3 that users need to be aware of when upgrading.

## Incompatible Changes Found

### Renamed Settings (3)

| Old Name (8.0.1) | New Name (9.0.0) | Impact |
|------------------|------------------|--------|
| `controlrate_profile` | `use_control_profile` | **HIGH** - Users must update their diff |
| `mixer_pid_profile_linking` | `mixer_control_profile_linking` | **HIGH** - Related to profile terminology change |
| `osd_pan_servo_pwm2centideg` | `osd_pan_servo_range_decadegrees` | **MEDIUM** - Unit/naming clarification |

### Removed Settings (3)

| Setting Name | Reason | Impact |
|--------------|--------|--------|
| `reboot_character` | Legacy MSP reboot method removed | **LOW** - Modern MSP used instead |
| `PG_CONTROL_RATE_PROFILES` | Renamed to `PG_CONTROL_PROFILES` | **LOW** - Internal parameter group |
| `PG_SERIAL_CONFIG` | Internal refactoring | **LOW** - Not user-facing |

## Background: PID Profile → Control Profile

INAV 9.0 renamed "PID Profile" to "Control Profile" throughout the codebase. This is a **terminology change** - the functionality is identical.

**Why?** These profiles control more than just PID settings (rates, filters, etc.), so "Control Profile" is more accurate.

**User Impact:** Anyone with `controlrate_profile` or `mixer_pid_profile_linking` in their diff must update to the new names.

## Migration Example

**Old diff (8.0.1):**
```
set controlrate_profile = 2
set mixer_pid_profile_linking = ON
set osd_pan_servo_pwm2centideg = 100
set reboot_character = 82
```

**Updated diff (9.0.0):**
```
set use_control_profile = 2
set mixer_control_profile_linking = ON
set osd_pan_servo_range_decadegrees = 10
# reboot_character removed - not needed
```

## Documentation Status

- [x] Incompatibility report created: `9.0.0-INCOMPATIBLE-SETTINGS.md`
- [x] Release manager guide updated with finding process
- [x] Automation script created: `find-incompatible-settings.sh`
- [ ] **TODO: Add "Incompatible Settings" section to release notes**
- [ ] **TODO: Verify wiki upgrade instructions mention these changes**

## Recommendation for Release Notes

Add this section to both firmware and configurator release notes:

```markdown
## Incompatible Settings Changes

The following CLI settings have been renamed or removed in INAV 9.0. When loading an 8.0.x `diff all`, these will show in RED:

**Renamed Settings:**
- `controlrate_profile` → `use_control_profile`
- `mixer_pid_profile_linking` → `mixer_control_profile_linking`
- `osd_pan_servo_pwm2centideg` → `osd_pan_servo_range_decadegrees`

**Removed Settings:**
- `reboot_character` - No longer needed (legacy MSP reboot method removed)

**Migration:** Edit your 8.0.x diff file and update the renamed settings before loading into INAV 9.0 CLI.

See full upgrade instructions in the wiki: https://github.com/iNavFlight/inav/wiki/9.0.0-Release-Notes
```

## Tools Created

1. **`find-incompatible-settings.sh`** - Automated detection script
   - Usage: `./find-incompatible-settings.sh 8.0.1 9.0.0-RC3`
   - Identifies removed/renamed settings
   - Suggests next steps

2. **`9.0.0-INCOMPATIBLE-SETTINGS.md`** - Detailed reference document
   - Full migration instructions
   - Explanation of each change
   - For user support reference

## Next Actions

1. Review current release notes (firmware & configurator)
2. Add "Incompatible Settings Changes" section if missing
3. Update wiki 9.0.0 release notes with migration details
4. Keep reference docs for user support

---

**How to regenerate this analysis:**
```bash
cd claude/release-manager
./find-incompatible-settings.sh 8.0.1 upstream/maintenance-9.x
```
